{% extends 'base.html' %}

{% block content %}
<div class="flight-results-container">
    {% for flight in flights %}
    <form id="flight-form" action="{% url 'flight_confirmation' %}" method="post" >

        <input type="text" value = "{{flight.formatted_depart_time}}" name = "depart_time" hidden>
        <input type="text" value = "{{flight.arrival_airport}}" name = "arrival_airport" hidden>
        <input type="text" value = {{flight.depart_airport}} name = "depart_airport" hidden>
        <input type="text" value = {{flight.formatted_arrival_time}} name = "arrival_time" hidden>
        <input type="text" value = {{flight.duration}} name = "duration" hidden>
        <input type="text" value = {{flight.price}} name = "price" hidden>

        {% csrf_token %}
        <div class="flight-card">
            <div class="flight-info">
                <!-- Departure info -->
                <div class="time-info departure-info">
                    <span class="formatted-time">{{ flight.formatted_depart_time }}</span>
                    <div class="airport-name">{{ flight.arrival_airport }}</div>

                </div>
                <!-- Duration and stop info -->
                <div class="duration-info">
                    <span>{{ flight.duration }} min</span>
                    <div class="duration-line"></div>  <!-- Visual representation of the flight line -->
                </div>
                <!-- Arrival info -->
                <div class="time-info arrival-info">
                    <span class="formatted-time">{{ flight.formatted_arrival_time }}</span>
                    <div class="airport-name">{{ flight.depart_airport }}</div>
                </div>
            </div>
            <div class="price-section">
                <div class="price-info">
                    ${{ flight.price }}
                    <span>per adult</span>
                </div>
                <button type= "submit" class="book-button">BOOK NOW</button>
            </div>
        </div>
    </form>
    {% endfor %}
</div>

<style>
    .flight-results-container {
        background-image: url("/static/Flights_c.jpg");
        position: relative; 
        height: 100vh; 
        width: 100%; 
        background-size: cover; 
        background-position: center; 
        background-repeat: no-repeat; 
        background-attachment: fixed; 
        overflow-y: auto;
    }
    

    .flight-card {
        display: flex;
        justify-content: space-between;
        background-color: #f4f4f8;
        margin-bottom: 20px;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .airport-name {
        width: 100px;
        word-wrap: break-word; /* Ensure long words can wrap */
        hyphens: auto; /* Enable hyphenation to allow breaking more naturally */
        text-align: center; 
        text-shadow: #0056b3;
        font-family: Georgia, 'Times New Roman', Times, serif;
        font-size: 13px;
    }   
    .formatted-time{
        font-family:Helvetica, sans-serif;
        font-size: 20px;
        font-weight: bold;
    }
    .flight-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 70%;
    }

    .time-info {
        display: flex;
        flex-direction: column;
        text-align: center;
    }

    .duration-info {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .duration-line {
        height: 2px;
        background-color: #51e2c2;
        width: 100%;
    }

    .price-section {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-end;
    }

    .price-info {
        font-size: 18px;
        font-weight: bold;
    }

    .book-button {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
    }

    .book-button:hover {
        background-color: #0056b3;
    }

</style>
{% endblock %}
